scalar Date
scalar DateTime

directive @authed on FIELD_DEFINITION

type Member {
  _id: ID!
  number: Int!
  permission: Permission
  fullName: String
  givenNames: String
  surname: String
  qualifications: [Qualification!]
  team: String
  availabilities(from: Date!, to: Date!): [Availability!]!
}

enum Permission {
  SELF
  TEAM
  UNIT
}

enum Qualification {
  CHAINSAW_CROSSCUT
  FLOOD_RESCUE_1
  FLOOD_RESCUE_2
  FLOOD_RESCUE_3
  LAND_SEARCH
  STORM_WATER_DAMAGE
  VERTICAL_RESCUE
}

type Availability {
  _id: ID!
  member: Member!
  date: Date!
  shift: Shift!
  available: Boolean!
}

enum Shift {
  MORNING
  AFTERNOON
  EVENING
}

type Query {
  members(team: String): [Member!]! @authed
  member(number: Int!): Member @authed
  membersAvailable(instant: DateTime!): [Member!]! @authed

  teams: [String!]! @authed
}

type AuthPayload {
  token: String!
  member: Member!
}

input AvailabilitiesInput {
  availabilities: [Availabilities!]!
}

type Mutation {
  login(memberNumber: Int!, password: String!): AuthPayload!
  setAvailabilities(memberNumber: Int!, availabilities: AvailabilitiesInput!): [Availability!]!
}
